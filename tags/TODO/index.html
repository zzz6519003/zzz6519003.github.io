<!DOCTYPE html>
<html>
<head>
  <meta charset="utf-8">
  
  <title>Tag: TODO | 男哥</title>
  <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
  <meta name="description" content="精力旺盛 欲火焚身">
<meta property="og:type" content="website">
<meta property="og:title" content="男哥">
<meta property="og:url" content="http://about.me/zzz6519003/tags/TODO/">
<meta property="og:site_name" content="男哥">
<meta property="og:description" content="精力旺盛 欲火焚身">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="男哥">
<meta name="twitter:description" content="精力旺盛 欲火焚身">

  
    <link rel="alternative" href="/atom.xml" title="男哥" type="application/atom+xml">
  
  
    <link rel="icon" href="/favicon.png">
  
  <link href="//fonts.googleapis.com/css?family=Source+Code+Pro" rel="stylesheet" type="text/css">
  <link rel="stylesheet" href="/css/style.css" type="text/css">

  

</head>
<body>
  <div id="container">
    <div id="wrap">
      <header id="header">
  <div id="banner"></div>
  <div id="header-outer" class="outer">
    <div id="header-title" class="inner">
      <h1 id="logo-wrap">
        <a href="/" id="logo">男哥</a>
      </h1>
      
        <h2 id="subtitle-wrap">
          <a href="/" id="subtitle">银河系快乐狙击队长</a>
        </h2>
      
    </div>
    <div id="header-inner" class="inner">
      <nav id="main-nav">
        <a id="main-nav-toggle" class="nav-icon"></a>
        
          <a class="main-nav-link" href="/">Home</a>
        
          <a class="main-nav-link" href="/archives">Archives</a>
        
      </nav>
      <nav id="sub-nav">
        
          <a id="nav-rss-link" class="nav-icon" href="/atom.xml" title="RSS Feed"></a>
        
        <a id="nav-search-btn" class="nav-icon" title="Search"></a>
      </nav>
      <div id="search-form-wrap">
        <form action="//google.com/search" method="get" accept-charset="UTF-8" class="search-form"><input type="search" name="q" results="0" class="search-form-input" placeholder="Search"><input type="submit" value="&#xF002;" class="search-form-submit"><input type="hidden" name="q" value="site:http://about.me/zzz6519003"></form>
      </div>
    </div>
  </div>
</header>
      <div class="outer">
        <section id="main">
  
    <article id="post-Have-a-cup-of-coffee" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/31/Have-a-cup-of-coffee/" class="article-date">
  <time datetime="2014-12-31T01:59:39.000Z" itemprop="datePublished">Dec 31 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/31/Have-a-cup-of-coffee/">Have a cup of coffee</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>From a outside look of it, I think it’s like a mixture of Python and Ruby.             —Nango
</em></p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">greet</span> = <span class="params">(message)</span> -&gt;</span></div><div class="line">  alert message</div></pre></td></tr></table></figure>

<h3 id="Advantages">Advantages</h3>
<ul>
<li>Least amount of code to solve problems</li>
<li>Readable and Understandable</li>
<li>Easy to Maintain</li>
</ul>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line">message = <span class="string">"Ready for some Coffee?"</span></div><div class="line">alert(message)</div></pre></td></tr></table></figure>

<p>=&gt;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> message;</div><div class="line">message = <span class="string">"Ready for some Coffee?"</span>;</div><div class="line">alert(message);</div></pre></td></tr></table></figure>

<h3 id="Use_a_default_value_of_‘Stranger’_for_the_name_parameter">Use a default value of ‘Stranger’ for the name parameter</h3>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">greet</span> = <span class="params">(name=<span class="string">'Stranger'</span>)</span> -&gt;</span> alert name</div></pre></td></tr></table></figure>

<p>=&gt;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> greet;</div><div class="line">greet = <span class="function"><span class="keyword">function</span><span class="params">(name)</span> </span>{</div><div class="line">  <span class="keyword">if</span> (name == <span class="literal">null</span>) {</div><div class="line">    name = <span class="string">'Stranger'</span>;</div><div class="line">  }</div><div class="line">  <span class="keyword">return</span> <span class="string">"Hello, "</span> + name;</div><div class="line">};</div></pre></td></tr></table></figure>

<p>Kind of Like <code>Ruby</code> ha, But In this field, it is called <code>CoffeeScript-style string interpolation.</code></p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">greet</span> = <span class="params">(name=<span class="string">'Stranger'</span>)</span> -&gt;</span></div><div class="line">  <span class="string">"Hello, <span class="subst">#{name}</span>"</span></div></pre></td></tr></table></figure>



<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">sum</span> = <span class="params">(a, b)</span> -&gt;</span></div><div class="line">  a + b</div></pre></td></tr></table></figure>

<p>One thing I like it is, you can be 任性 like this:</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line"><span class="function"><span class="title">coffee</span><span class="params">()</span></span></div><div class="line"><span class="title">coffee</span><span class="params">(<span class="string">"Yo"</span>)</span></div><div class="line"><span class="title">coffee</span> "Y<span class="title">o</span>"</div><div class="line"><span class="title">coffee</span><span class="params">(<span class="string">"Yo"</span>, <span class="number">2</span>)</span></div><div class="line"><span class="title">coffee</span> "Y<span class="title">o</span>", 2</div></pre></td></tr></table></figure>

<h3 id="Array">Array</h3>
<p>storeLocations = [‘Orlando’, ‘Winter Park’, ‘Sanford’]</p>
<p>Can use new lines instead of commas</p>
<p>storeLocations = [<br> ‘Orlando’<br> ‘Winter Park’<br> ‘Sanford’<br>]</p>
<h2 id="Loop">Loop</h2>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">storeLocations.forEach <span class="function"><span class="params">(location, index)</span> -&gt;</span></div><div class="line"> alert <span class="string">"Location: <span class="subst">#{location}</span></span></div><div class="line"> </div><div class="line">alert "<span class="attribute">Location</span>: <span class="comment">#{location}" for location in storeLocations</span></div><div class="line"><span class="keyword">for</span> location <span class="keyword">in</span> storeLocations</div><div class="line"> alert <span class="string">"Location: <span class="subst">#{location}</span>"</span></div></pre></td></tr></table></figure>

<h3 id="Indent">Indent</h3>
<p>There are things I don’t like like this.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="title">coffee</span> =</div><div class="line"> name: <span class="string">'French'</span></div><div class="line">strength: <span class="number">1</span></div></pre></td></tr></table></figure>

<p>=&gt;</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">coffee = {</div><div class="line"> name: <span class="string">'French'</span></div><div class="line">};</div><div class="line">({</div><div class="line"> strength: <span class="number">1</span></div><div class="line">})</div></pre></td></tr></table></figure>

<h3 id="一行流_(one_line_combo)">一行流 (one line combo)</h3>
<p>If u do python, you familiar with this.</p>
<figure class="highlight coffee"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line">filteredFlights =</div><div class="line">(flight <span class="keyword">for</span> flight <span class="keyword">in</span> currentFlights <span class="keyword">when</span> stops <span class="keyword">is</span> <span class="string">'2+'</span> <span class="keyword">or</span></div><div class="line">flight.routing <span class="keyword">is</span> <span class="number">0</span>)</div></pre></td></tr></table></figure>

<p>There’re lots of other stuff, like automatically <code>hoisting</code> for u to check out.</p>
<h3 id="OO">OO</h3>
<p>TODO</p>
<h3 id="Install">Install</h3>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div></pre></td><td class="code"><pre><div class="line"><span class="number">1</span>. <span class="constant">Install</span> <span class="constant">Node</span>.js <span class="symbol">http:</span>/<span class="regexp">/nodejs.org/</span></div><div class="line"><span class="number">2</span>. <span class="constant">Install</span> npm <span class="symbol">http:</span>/<span class="regexp">/npmjs.org/</span></div><div class="line"><span class="number">3</span>. <span class="variable">$ </span>npm install -g coffee-script</div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div></pre></td><td class="code"><pre><div class="line">coffee -c <span class="keyword">test</span>.coffee Creates <span class="keyword">test</span>.js</div><div class="line">coffee -cw <span class="keyword">test</span>.coffee Every time <span class="keyword">test</span>.coffee is</div><div class="line">updated re-compile.</div><div class="line">coffee -c src -o <span class="keyword">js</span> Compile all <span class="string">.coffee</span> files <span class="keyword">in</span> the</div><div class="line">src dir <span class="keyword">into</span> the <span class="keyword">js</span> dir. </div><div class="line">coffee -wc src -o <span class="keyword">js</span> Every time a file is updated</div><div class="line">re-compile</div></pre></td></tr></table></figure>

<p>Link:<br><a href="http://coffeescript.codeschool.com/levels/1/challenges/1" target="_blank" rel="external">http://coffeescript.codeschool.com/levels/1/challenges/1</a><br><a href="http://courseware.codeschool.com/coffeescript_slides.pdf" target="_blank" rel="external">http://courseware.codeschool.com/coffeescript_slides.pdf</a></p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://about.me/zzz6519003/2014/12/31/Have-a-cup-of-coffee/" data-id="sc0e712w83fj7tui" class="article-share-link">Share</a>
      
        <a href="http://about.me/zzz6519003/2014/12/31/Have-a-cup-of-coffee/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Javascript/">Javascript</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TODO/">TODO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-我是如何堕落的" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/28/我是如何堕落的/" class="article-date">
  <time datetime="2014-12-28T04:28:53.000Z" itemprop="datePublished">Dec 28 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/28/我是如何堕落的/">我是怎么堕落的</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>人在一个群体  容易被同化<br>我小学初中 一直是个high爆全场的人，周围的人也high爆全场，所以成绩包括我们班的成绩特别好<br>到了高中，逐渐所有人变得不再开放 你再high爆全场就会被当成脑残，所以我就也变得不再那么开放，所以成绩就垃圾了</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://about.me/zzz6519003/2014/12/28/我是如何堕落的/" data-id="fqdvt1j6fzz8wrzs" class="article-share-link">Share</a>
      
        <a href="http://about.me/zzz6519003/2014/12/28/我是如何堕落的/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/Life/">Life</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TODO/">TODO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-这篇博客用来喷GFW" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/18/这篇博客用来喷GFW/" class="article-date">
  <time datetime="2014-12-18T09:20:52.000Z" itemprop="datePublished">Dec 18 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/18/这篇博客用来喷GFW/">这篇博客用来喷GFW</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><em>这个世界没有什么对与错 但是有最佳实践    —男哥     </em><br><em>用类比的方法 我可以更清晰地看清这个世界 甚至这个宇宙    —男哥</em></p>
<p>之前跟朋友聊，朋友说GFW不会真正影响我们，说因为翻墙太容易了，只要你想根本不是问题。<br>他说的的确也是。但是如果翻墙说到底还是会花时间的，如果你一时想要搜一个东西比较急（其实大多数你要搜东西的时候都应该是比较心切想要知道答案的），你一般就会选择百度了，<strong>百度没有错</strong>，但是如果你因为这个而丧失了接触更好东西的机会，那就得不偿失了。</p>
<p>因为互联网有棒棒的东西叫做超链接，当你得到了优质的搜索结果后，想象力是不可低估的，搜索结果不同造成的影响可以到次方级别。</p>
<h3 id="为什么中国有GFW（我的观点">为什么中国有GFW（我的观点</h3>
<p>其实一个国家很多程度上跟一个人类似的，中国之所以对网络那么敏感，就是想限制人们知道有些黑历史。我觉得中国人还是很爱面子的，所以类比的来说，我们中国公民就类似与一个家庭的孩子，因为身家不太清白，家里的大人就限制你去了解世界，因为他怕你知道了黑历史后就觉得自己家原来并不是那么神圣了。<br>所以我们每个中国公民就像是一个，<strong><em>被内闭的家庭教育所坑害了的孩子</em></strong>。</p>
<p>不过既然有害处就一定有好处<br>GFW的好处：</p>
<ul>
<li>有妹子找我学翻墙</li>
<li>麦迪在twitter上回复了我</li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://about.me/zzz6519003/2014/12/18/这篇博客用来喷GFW/" data-id="z9fba9yb9cthkoe8" class="article-share-link">Share</a>
      
        <a href="http://about.me/zzz6519003/2014/12/18/这篇博客用来喷GFW/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/GFW/">GFW</a></li><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TODO/">TODO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-The-Art-of-Unix-Programming-Book-Note" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/12/11/The-Art-of-Unix-Programming-Book-Note/" class="article-date">
  <time datetime="2014-12-11T10:03:02.000Z" itemprop="datePublished">Dec 11 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/12/11/The-Art-of-Unix-Programming-Book-Note/">The Art of Unix Programming-Book Note</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p>题记  似乎所有的领域  发展到最后  都会变成哲学             —男哥</p>
<p>Rule 1. You can’t tell where a program is going to spend its time. Bottlenecks<br>occur in surprising places, so don’t try to second guess and put in a speed hack<br>until you’ve proven that’s where the bottleneck is.<br>Rule 2. Measure. Don’t tune for speed until you’ve measured, and even then<br>don’t unless one part of the code overwhelms the rest.<br>Rule 3. Fancy algorithms are slow when n is small, and n is usually small.<br>Fancy algorithms have big constants. Until you know that n is frequently going<br>to be big, don’t get fancy. (Even if n does get big, use Rule 2 first.)<br>Rule 4. Fancy algorithms are buggier than simple ones, and they’re much<br>harder to implement. Use simple algorithms as well as simple data structures.<br>Rule 5. Data dominates. If you’ve chosen the right data structures and<br>organized things well, the algorithms will almost always be self-evident. Data<br>structures, not algorithms, are central to programming. [3]<br>Rule 6. There is no Rule 6</p>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://about.me/zzz6519003/2014/12/11/The-Art-of-Unix-Programming-Book-Note/" data-id="j1lioy4x1k9jqkah" class="article-share-link">Share</a>
      
        <a href="http://about.me/zzz6519003/2014/12/11/The-Art-of-Unix-Programming-Book-Note/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TODO/">TODO</a></li></ul>

    </footer>
  </div>
  
</article>


  
    <article id="post-node-testing" class="article article-type-post" itemscope itemprop="blogPost">
  <div class="article-meta">
    <a href="/2014/11/29/node-testing/" class="article-date">
  <time datetime="2014-11-29T14:44:53.000Z" itemprop="datePublished">Nov 29 2014</time>
</a>
    
  </div>
  <div class="article-inner">
    
    
      <header class="article-header">
        
  
    <h1 itemprop="name">
      <a class="article-title" href="/2014/11/29/node-testing/">node-testing</a>
    </h1>
  

      </header>
    
    <div class="article-entry" itemprop="articleBody">
      
        <p><code>更新中...</code></p>
<h1 id="Mocha">Mocha</h1>
<p>Mocha is a simple, flexible, fun JavaScript test framework for node.js and the browser. For more information view the documentation.</p>
<h3 id="Intro">Intro</h3>
<p>搭建一个测试原型</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div></pre></td><td class="code"><pre><div class="line"><span class="comment">//f2e 是原型生成的目录</span></div><div class="line">mocha <span class="keyword">init</span> f2e</div></pre></td></tr></table></figure>

<p>浏览器测试 饭桶js</p>
<p><code>npm i -g mocha-phantomjs</code></p>
<p>npm i 为npm install的缩写</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">if</span> (<span class="built_in">window</span>.mochaPhantomJS) { mochaPhantomJS.run(); }</div></pre></td></tr></table></figure>

<p>出于应用健壮性的考量，针对前端 js 脚本的单元测试也非常重要。而前后端通吃，也是 mocha 的一大特点。</p>
<h3 id="场景_Situation">场景 Situation</h3>
<ul>
<li>在我们现在的subcase项目中，统一了<code>ret_code</code>作为成功与否的标志，方便测试。</li>
<li>HTTP Status testing Send HTTP requests, receive responses and check HTTP statuses</li>
</ul>
<h2 id="Example">Example</h2>
<h3 id="Simple_example">Simple example</h3>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line"><span class="keyword">var</span> should = <span class="built_in">require</span>(<span class="string">'chai'</span>).should(),</div><div class="line">  scapegoat = <span class="built_in">require</span>(<span class="string">'../index'</span>),</div><div class="line">  <span class="built_in">escape</span> = scapegoat.escape,</div><div class="line">  <span class="built_in">unescape</span> = scapegoat.unescape;</div><div class="line"></div><div class="line">  describe(<span class="string">'#escape'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    it(<span class="string">'converts & into &amp;'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    <span class="built_in">escape</span>(<span class="string">'&'</span>).should.equal(<span class="string">'&amp;'</span>);</div><div class="line">  });</div></pre></td></tr></table></figure>

<h3 id="API_Testing_Example">API Testing Example</h3>
<p>from <a href="https://gist.github.com/vgheri/5430387#file-test-js" target="_blank" rel="external">https://gist.github.com/vgheri/5430387#file-test-js</a></p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div></pre></td><td class="code"><pre><div class="line">  describe(<span class="string">'Account'</span>, <span class="function"><span class="keyword">function</span><span class="params">()</span> </span>{</div><div class="line">    it(<span class="string">'should return error trying to save duplicate username'</span>, <span class="function"><span class="keyword">function</span><span class="params">(done)</span> </span>{</div><div class="line">      <span class="keyword">var</span> profile = {</div><div class="line">        username: <span class="string">'vgheri'</span>,</div><div class="line">        password: <span class="string">'test'</span>,</div><div class="line">        firstName: <span class="string">'Valerio'</span>,</div><div class="line">        lastName: <span class="string">'Gheri'</span></div><div class="line">      };</div><div class="line">    <span class="comment">// once we have specified the info we want to send to the server via POST verb,</span></div><div class="line">    <span class="comment">// we need to actually perform the action on the resource, in this case we want to </span></div><div class="line">    <span class="comment">// POST on /api/profiles and we want to send some info</span></div><div class="line">    <span class="comment">// We do this using the request object, requiring supertest!</span></div><div class="line">    request(url)</div><div class="line">	.post(<span class="string">'/api/profiles'</span>)</div><div class="line">	.send(profile)</div><div class="line">    <span class="comment">// end handles the response</span></div><div class="line">	.end(<span class="function"><span class="keyword">function</span><span class="params">(err, res)</span> </span>{</div><div class="line">          <span class="keyword">if</span> (err) {</div><div class="line">            <span class="keyword">throw</span> err;</div><div class="line">          }</div><div class="line">          <span class="comment">// this is should.js syntax, very clear</span></div><div class="line">          res.should.have.status(<span class="number">400</span>);</div><div class="line">          done();</div><div class="line">        });</div><div class="line">    });</div><div class="line">    it(<span class="string">'should correctly update an existing account'</span>, <span class="function"><span class="keyword">function</span><span class="params">(done)</span></span>{</div><div class="line">	<span class="keyword">var</span> body = {</div><div class="line">		firstName: <span class="string">'JP'</span>,</div><div class="line">		lastName: <span class="string">'Berd'</span></div><div class="line">	};</div><div class="line">	request(url)</div><div class="line">		.put(<span class="string">'/api/profiles/vgheri'</span>)</div><div class="line">		.send(body)</div><div class="line">		.expect(<span class="string">'Content-Type'</span>, <span class="regexp">/json/</span>)</div><div class="line">		.expect(<span class="number">200</span>) <span class="comment">//Status code</span></div><div class="line">		.end(<span class="function"><span class="keyword">function</span><span class="params">(err,res)</span> </span>{</div><div class="line">			<span class="keyword">if</span> (err) {</div><div class="line">				<span class="keyword">throw</span> err;</div><div class="line">			}</div><div class="line">			<span class="comment">// Should.js fluent syntax applied</span></div><div class="line">			res.body.should.have.property(<span class="string">'_id'</span>);</div><div class="line">	                res.body.firstName.should.equal(<span class="string">'JP'</span>);</div><div class="line">	                res.body.lastName.should.equal(<span class="string">'Berd'</span>);                    </div><div class="line">	                res.body.creationDate.should.not.equal(<span class="literal">null</span>);</div><div class="line">			done();</div><div class="line">		});</div><div class="line">	});</div><div class="line">  });</div><div class="line">});</div></pre></td></tr></table></figure>



<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div></pre></td><td class="code"><pre><div class="line">describe(<span class="string">'#index'</span>, <span class="function"><span class="keyword">function</span> <span class="params">()</span> </span>{</div><div class="line">  it(<span class="string">'should get /topic/:tid 200'</span>, <span class="function"><span class="keyword">function</span> <span class="params">(done)</span> </span>{</div><div class="line">    request.<span class="keyword">get</span>(<span class="string">'/topic/'</span> + support.testTopic._id)</div><div class="line">    .expect(<span class="number">200</span>, <span class="function"><span class="keyword">function</span> <span class="params">(err, res)</span> </span>{</div><div class="line">      res.text.should.containEql(<span class="string">'test topic content'</span>);</div><div class="line">      res.text.should.containEql(<span class="string">'alsotang'</span>);</div><div class="line">      done(err);</div><div class="line">    });</div><div class="line">  });</div></pre></td></tr></table></figure>

<p>涉及到插入的时候，之前写rspec也遇到类似的<br>的情况，可以通过测试count是否增加1。</p>
<h3 id="Fun">Fun</h3>
<p><code>mocha -R nyan</code> and whole lots of other stuff.</p>
<figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div></pre></td><td class="code"><pre><div class="line">1   -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-__,------,</div><div class="line">0   -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-__|  /\_/\</div><div class="line">0   -_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_-_~|_( ^ .^)</div><div class="line">    -<span class="ruby"><span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span>-<span class="number">_</span> <span class="string">""</span>  <span class="string">""</span></span></div><div class="line"></div><div class="line"> 1 passing (141ms)</div></pre></td></tr></table></figure>

<h1 id="Chai">Chai</h1>
<p>Chai is a BDD / TDD assertion library for node and the browser that can be delightfully paired with any javascript testing framework.</p>
<figure class="highlight js"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div></pre></td><td class="code"><pre><div class="line">Should</div><div class="line"></div><div class="line">chai.should();</div><div class="line"></div><div class="line">foo.should.be.a(<span class="string">'string'</span>);</div><div class="line">foo.should.equal(<span class="string">'bar'</span>);</div><div class="line">foo.should.have.length(<span class="number">3</span>);</div><div class="line">tea.should.have.property(<span class="string">'flavors'</span>)</div><div class="line">  .with.length(<span class="number">3</span>);</div><div class="line">  </div><div class="line">Expect</div><div class="line"></div><div class="line"><span class="keyword">var</span> expect = chai.expect;</div><div class="line"></div><div class="line">expect(foo).to.be.a(<span class="string">'string'</span>);</div><div class="line">expect(foo).to.equal(<span class="string">'bar'</span>);</div><div class="line">expect(foo).to.have.length(<span class="number">3</span>);</div><div class="line">expect(tea).to.have.property(<span class="string">'flavors'</span>)</div><div class="line">  .with.length(<span class="number">3</span>);</div><div class="line"></div><div class="line">Assert</div><div class="line"></div><div class="line"><span class="keyword">var</span> assert = chai.assert;</div><div class="line"></div><div class="line">assert.typeOf(foo, <span class="string">'string'</span>);</div><div class="line">assert.equal(foo, <span class="string">'bar'</span>);</div><div class="line">assert.lengthOf(foo, <span class="number">3</span>)</div><div class="line">assert.property(tea, <span class="string">'flavors'</span>);</div><div class="line">assert.lengthOf(tea.flavors, <span class="number">3</span>);</div></pre></td></tr></table></figure>

<h1 id="SuperTest">SuperTest</h1>
<h1 id="Miscs">Miscs</h1>
<p>Be kind and don’t make developers hunt around in your docs to figure out how to run the tests, add a make test target to your Makefile - TJ</p>
<h1 id="Nock">Nock</h1>
<p>Nock is an HTTP mocking library that can record HTTP calls and play them back, so that you can either mock an API by hand, or just record actual HTTP calls and use their responses in future test runs. Our orchestrate.js library does the former, but I’ll show you how to do the latter.</p>
<h3 id="转自链接">转自链接</h3>
<ul>
<li><a href="https://github.com/alsotang/node-lessons/tree/master/lesson7" target="_blank" rel="external">https://github.com/alsotang/node-lessons/tree/master/lesson7</a></li>
<li><a href="https://github.com/zzz6519003/my_first_node_module" target="_blank" rel="external">https://github.com/zzz6519003/my_first_node_module</a></li>
<li><a href="http://chaijs.com/" target="_blank" rel="external">http://chaijs.com/</a></li>
<li><a href="https://orchestrate.io/blog/2014/06/13/how-to-test-code-that-uses-http-apis-using-node-js-mocha-and-nock/" target="_blank" rel="external">https://orchestrate.io/blog/2014/06/13/how-to-test-code-that-uses-http-apis-using-node-js-mocha-and-nock/</a></li>
<li><a href="http://strongloop.com/strongblog/how-to-test-an-api-with-node-js/" target="_blank" rel="external">http://strongloop.com/strongblog/how-to-test-an-api-with-node-js/</a></li>
<li><a href="http://beletsky.net/2014/03/testable-apis-with-node-dot-js.html" target="_blank" rel="external">http://beletsky.net/2014/03/testable-apis-with-node-dot-js.html</a></li>
<li><a href="https://gist.github.com/vgheri/5430387#file-test-js" target="_blank" rel="external">https://gist.github.com/vgheri/5430387#file-test-js</a></li>
</ul>

      
    </div>
    <footer class="article-footer">
      <a data-url="http://about.me/zzz6519003/2014/11/29/node-testing/" data-id="bm3fb5cjqycl7wcl" class="article-share-link">Share</a>
      
        <a href="http://about.me/zzz6519003/2014/11/29/node-testing/#disqus_thread" class="article-comment-link">Comments</a>
      
      
  <ul class="article-tag-list"><li class="article-tag-list-item"><a class="article-tag-list-link" href="/tags/TODO/">TODO</a></li></ul>

    </footer>
  </div>
  
</article>


  
  
</section>
        
          <aside id="sidebar">
  
    
  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tags</h3>
    <div class="widget">
      <ul class="tag-list"><li class="tag-list-item"><a class="tag-list-link" href="/tags/Design/">Design</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/GFW/">GFW</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Javascript/">Javascript</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Life/">Life</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Node/">Node</a><span class="tag-list-count">1</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/Product/">Product</a><span class="tag-list-count">2</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/TODO/">TODO</a><span class="tag-list-count">5</span></li><li class="tag-list-item"><a class="tag-list-link" href="/tags/iOS/">iOS</a><span class="tag-list-count">1</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Tag Cloud</h3>
    <div class="widget tagcloud">
      <a href="/tags/Design/" style="font-size: 16.67px;">Design</a><a href="/tags/GFW/" style="font-size: 13.33px;">GFW</a><a href="/tags/Javascript/" style="font-size: 13.33px;">Javascript</a><a href="/tags/Life/" style="font-size: 13.33px;">Life</a><a href="/tags/Life-TODO/" style="font-size: 10.00px;">Life TODO</a><a href="/tags/Life-TODO/" style="font-size: 10.00px;">Life, TODO</a><a href="/tags/Node/" style="font-size: 13.33px;">Node</a><a href="/tags/Product/" style="font-size: 16.67px;">Product</a><a href="/tags/TODO/" style="font-size: 20.00px;">TODO</a><a href="/tags/TODO-GFW/" style="font-size: 10.00px;">TODO GFW</a><a href="/tags/TODO-GFW/" style="font-size: 10.00px;">TODO, GFW</a><a href="/tags/iOS/" style="font-size: 13.33px;">iOS</a>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Archives</h3>
    <div class="widget">
      <ul class="archive-list"><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/12/">December 2014</a><span class="archive-list-count">7</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/11/">November 2014</a><span class="archive-list-count">1</span></li><li class="archive-list-item"><a class="archive-list-link" href="/archives/2014/10/">October 2014</a><span class="archive-list-count">4</span></li></ul>
    </div>
  </div>

  
    
  <div class="widget-wrap">
    <h3 class="widget-title">Recents</h3>
    <div class="widget">
      <ul>
        
          <li>
            <a href="/2014/12/31/Have-a-cup-of-coffee/">Have a cup of coffee</a>
          </li>
        
          <li>
            <a href="/2014/12/30/Instapaper™-VS-Pocket™/">Instapaper™ VS Pocket™</a>
          </li>
        
          <li>
            <a href="/2014/12/30/Difference-of-Facebook-and-China-s-FB/">Difference of Facebook and China&#39;s FB</a>
          </li>
        
          <li>
            <a href="/2014/12/28/我是如何堕落的/">我是怎么堕落的</a>
          </li>
        
          <li>
            <a href="/2014/12/18/这篇博客用来喷GFW/">这篇博客用来喷GFW</a>
          </li>
        
      </ul>
    </div>
  </div>

  
</aside>
        
      </div>
      <footer id="footer">
  
  <div class="outer">
    <div id="footer-info" class="inner">
      &copy; 2014 John Doe<br>
      Powered by <a href="http://hexo.io/" target="_blank">Hexo</a>
    </div>
  </div>
</footer>
    </div>
    <nav id="mobile-nav">
  
    <a href="/" class="mobile-nav-link">Home</a>
  
    <a href="/archives" class="mobile-nav-link">Archives</a>
  
</nav>
    
<script>
  var disqus_shortname = 'Snowmanzzz';
  
  (function(){
    var dsq = document.createElement('script');
    dsq.type = 'text/javascript';
    dsq.async = true;
    dsq.src = '//' + disqus_shortname + '.disqus.com/count.js';
    (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
  })();
</script>


<script src="//ajax.googleapis.com/ajax/libs/jquery/2.0.3/jquery.min.js"></script>


  <link rel="stylesheet" href="/fancybox/jquery.fancybox.css" type="text/css">

  <script src="/fancybox/jquery.fancybox.pack.js" type="text/javascript"></script>



<script src="/js/script.js" type="text/javascript"></script>


  </div>
</body>
</html>